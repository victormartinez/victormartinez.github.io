{"componentChunkName":"component---src-templates-blog-post-js","path":"/pt/blog/2019/2019-09-07-Iniciando_com_sistemas_de_recomendacao_parte_II/","result":{"data":{"site":{"siteMetadata":{"title":null,"siteUrl":"https://vcrmartinez.com","social":{"twitter":"vcrmartinez","github":"victormartinez","linkedin":"vcrmartinez","speakerdeck":"victormartinez"}}},"markdownRemark":{"id":"6fd5dfe9-dedb-5a23-b2e1-861736e6e8ff","excerpt":"No post anterior eu introduzi a área de RecSys e os níveis de personalização. Hoje eu vou discutir sobre o pipeline de recomendação e como ele funciona. Se você…","html":"<p>No post <a href=\"/pt/blog/2019/2019-08-13-Iniciando_com_sistemas_de_recomendacao_parte_I/\">anterior</a> eu introduzi a área de RecSys e os níveis de personalização. Hoje eu vou discutir sobre o pipeline de recomendação e como ele funciona.</p>\n<p>Se você perdeu os outros posts, encontre aqui:</p>\n<ul>\n<li><a href=\"/pt/blog/2019/2019-08-13-Iniciando_com_sistemas_de_recomendacao_parte_I/\">Parte I: Introdução e níveis de personalização</a></li>\n<li>Parte II: Como funciona</li>\n<li>Parte III: Técnicas</li>\n<li>Parte IV: Métricas</li>\n<li>Parte V: Desafios</li>\n<li>Parte VI: Referências e leituras adicionais</li>\n</ul>\n<h2>Como funciona</h2>\n<p>Há muito trabalho a ser feito antes de fazer a recomendação em si. A coleta de dados, o pré-processamento e o design do modelo, por exemplo, são fases importantes. De modo geral, é possível visualizar o processo como um pipeline composto pelas fases ilustradas na figura a seguir.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 755px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 27.916666666666668%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsSAAALEgHS3X78AAABkUlEQVQY0yWRbU/TYBiF+2NN/Oof0ET8IDEY3NaVbsRSEEVmwJi2e9EZsrEwRiSRLYKOOanSCnvpOtZ1yiaX28NJTu7kJOfKSW7p3OvScBy6o5DJvwk3N+BceJx+dzhtunS8gJnCv2Na/Wsav1q4XshVeC3ygd/BseucT91yz5C+JlQqzxZpv92m6/7G77Xo29u4X3QuTp4zutyh3Rvinx1wmX/Iz9wj3Nx9/BMLr9dj/7iNnm2ylmvwpuggGfOPMRcW+CjL+O0OQeBTTEexNucwNh7wubzJZLraPi7zLnIXQ7nH1tM7VAspsfB9qcZ8wuRJ0mBpYwdJ0TRUfYW1VIpgOGQ0+oO++hplSSMSW8ZMfxDFeuMHcnKVxMoroqpOce9A5HulAloyjrassJV6ibRbLFDaLVIpl6ewEWEYsr7+AlVVUOIy2WzmFlj/RjwWJS7HiEYWRWemZrPJp8ND4WqthhQEA4bDgH7fZzweC2g+n8eyLAzDoFLZF0XbtjFNg0wmLfJq9ej2KYMr4Rlndv8DUG+XRqscS6AAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image lazyload\"\n        alt=\"Recommender System Pipeline\"\n        title=\"Recommender System Pipeline\"\n        data-src=\"/static/445881097e2f93831b80b7d8dbcb42a0/cab43/recsys_phases.png\"\n        data-srcset=\"/static/445881097e2f93831b80b7d8dbcb42a0/8ff5a/recsys_phases.png 240w,\n/static/445881097e2f93831b80b7d8dbcb42a0/e85cb/recsys_phases.png 480w,\n/static/445881097e2f93831b80b7d8dbcb42a0/cab43/recsys_phases.png 755w\"\n        sizes=\"(max-width: 755px) 100vw, 755px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>Nas próximas seções, mergulharemos em cada fase.</p>\n<h3>Coleta dos Dados</h3>\n<p>O aspecto mais importante do RecSys é a compreensão das preferências dos usuários. Portanto, tudo começa com os dados coletados resultantes da interação entre usuários e itens. Dependendo dos dados coletados, você terá feedbacks <strong>implícitos</strong> ou <strong>explícitos</strong> sobre as preferências de seus usuários.</p>\n<p><strong>1. Explícito:</strong></p>\n<p>O usuário indica explicitamente o quanto gosta / não gosta de um produto. Por exemplo, classificações que variam de 1 a 5 (por exemplo, Amazon) ou gosto / não gosto (por exemplo, Facebook, Netflix).</p>\n<p>Trabalhar com dados explícitos facilita o processo de compreensão das preferências dos usuários, mas traz alguns desafios: (i) uma vez que classificar itens exige esforço do usuário, nem todos os usuários classificam os itens consumidos; (ii) as pessoas avaliam os itens de maneira diferente devido a diferentes fatores (algumas pessoas são mais exigentes do que outras); (iii) existem pessoas tendenciosas em relação a itens / categorias / produtos específicos.</p>\n<p><strong>2. Implícito:</strong></p>\n<p>Feedback implícito, como o nome sugere, não explicita preferências com avaliações. Em vez disso, representa ações ou características que indicam o quanto um determinado usuário gosta de um determinado produto. Por exemplo, você pode não gostar de um vídeo no Youtube, mas assisti-lo do início ao fim. Apesar de não ter gostado do vídeo (feedback explícito), você assistiu a todo o vídeo (feedback implícito) e, portanto, é muito provável que tenha gostado.</p>\n<p>Outros exemplos que são considerados feedback implícito:</p>\n<p>      i. Coloque os itens no carrinho de compras\n      ii. Número de vezes que você pesquisou por um item\n      iii. Quanto tempo você passou lendo um artigo</p>\n<p>** 3. Híbrido:**</p>\n<p>Existem abordagens que levam ambos os feedbacks em consideração para fornecer recomendações mais precisas. Uma vez que eles usam feedback explícito e implícito, diz-se que o algoritmo usa feedback híbrido. Certamente é uma abordagem mais poderosa porque no mundo real os usuários não gostam / não gostam explicitamente de todos os itens (o exemplo do Youtube mencionado acima ilustra o cenário).</p>\n<p>** Discussão: usar ou não feedbacks híbridos? **\nNão usar feedback híbrido não implica em um mecanismo RecSys ruim porque cada domínio de negócios requer abordagens específicas. A melhor maneira de desenvolver um bom motor é começar devagar e continuar iterando até atingir resultados satisfatórios e um custo de manutenção razoável. Às vezes, uma arquitetura muito complexa não compensa e, portanto, uma abordagem simples, mas robusta, faz um trabalho maravilhoso.</p>\n<h3>Pré-processando</h3>\n<p>O pré-processamento é tão importante quanto a fase de coleta. No cenário do mundo real, você não pode ajustar os dados brutos diretamente nos algoritmos sem análise e pré-processamento. Elementos ruidosos e formato de dados são problemas comuns que precisam ser resolvidos. Outras questões podem requerer atenção especial:</p>\n<p>      i. Como transformar dados implícitos em números viáveis ​​para o seu modelo?\n      ii. Existe algum recurso que não contribui para o modelo?\n      iii. Como você vai estruturar os dados antes de treinar os modelos? (csv? baldes? arquivos? memória?)\n      iv. Como você vai fazer a ingestão de dados por meio do seu modelo?</p>\n<p>Se você seguir alguns tutoriais na Internet, pode não perceber a etapa de pré-processamento e isso porque eles costumam usar conjuntos de dados gratuitos como [Movielens] (<a href=\"https://grouplens.org/datasets/movielens/\">https://grouplens.org/datasets/movielens/</a>). Nesses casos, os dados já foram pré-processados ​​em um padrão comum (<em>por exemplo, CSV, TSV, SSV, etc) como `user</em>id; item<em>id; rating; timestamp` e você precisa se preocupar com isso. No entanto, em cenários do mundo real, o pré-processamento é uma etapa comum em direção a um mecanismo RecSys melhor. A figura na seção \\</em>Como funciona_ lista algumas técnicas como <em>OneHot Encoding</em>, <em>Row Compression</em> e <em>Variable Selection</em> que são muito comuns no campo Machine Learning, mas você pode não usar (todas).</p>\n<h3>Aprendendo</h3>\n<p>Os motores RecSys geralmente aproveitam os algoritmos de aprendizado de máquina para construir seus modelos. A recomendação personalizada requer a construção da Matriz de Avaliações (R): uma matriz que representa as preferências do usuário. A tabela abaixo ilustra isso usando filmes como itens.</p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th>Batman</th>\n<th>Avengers</th>\n<th>Harry Potter</th>\n<th>Star Wars</th>\n<th>Hangover</th>\n<th>A Star is Born</th>\n<th>Nemo</th>\n<th>…</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Victor</td>\n<td>4.0</td>\n<td>4.0</td>\n<td></td>\n<td></td>\n<td></td>\n<td>2.0</td>\n<td>2.0</td>\n<td></td>\n</tr>\n<tr>\n<td>Jess</td>\n<td>2.5</td>\n<td></td>\n<td>4.0</td>\n<td></td>\n<td>4.0</td>\n<td>5.0</td>\n<td>4.0</td>\n<td></td>\n</tr>\n<tr>\n<td>Luke</td>\n<td>4.0</td>\n<td></td>\n<td>3.0</td>\n<td>3.0</td>\n<td></td>\n<td>1.0</td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td>…</td>\n<td></td>\n<td></td>\n<td></td>\n<td></td>\n<td></td>\n<td></td>\n<td></td>\n<td></td>\n</tr>\n</tbody>\n</table>\n<p>Como você pode ver, a matriz tem algumas propriedades:</p>\n<p>      i. É esparso: os usuários não viam / assistiam / liam todo o catálogo de itens, certo?\n      ii. As linhas representam os usuários e as colunas representam os itens\n      iii. Valores ausentes indicam que o usuário não avaliou o item</p>\n<p>Então, por meio de iterações matemáticas, ele prevê as classificações que os usuários dariam para cada item não visto e constrói a Matriz de classificações previstas (R ^):</p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th>Batman</th>\n<th>Avengers</th>\n<th>Harry Potter</th>\n<th>Star Wars</th>\n<th>Hangover</th>\n<th>A Star is Born</th>\n<th>Nemo</th>\n<th>…</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Victor</td>\n<td>4.0</td>\n<td>4.0</td>\n<td>[3.0]</td>\n<td>[5.0]</td>\n<td>[4.0]</td>\n<td>2.0</td>\n<td>2.0</td>\n<td></td>\n</tr>\n<tr>\n<td>Jess</td>\n<td>2.5</td>\n<td>[2.0]</td>\n<td>4.0</td>\n<td>[2.0]</td>\n<td>4.0</td>\n<td>5.0</td>\n<td>4.0</td>\n<td></td>\n</tr>\n<tr>\n<td>Luke</td>\n<td>4.0</td>\n<td>[4.0]</td>\n<td>3.0</td>\n<td>3.0</td>\n<td>[4.0]</td>\n<td>1.0</td>\n<td>[2.0]</td>\n<td></td>\n</tr>\n<tr>\n<td>…</td>\n<td></td>\n<td></td>\n<td></td>\n<td></td>\n<td></td>\n<td></td>\n<td></td>\n<td></td>\n</tr>\n</tbody>\n</table>\n<p>* <em>Valores entre colchetes significam a classificação prevista.</em></p>\n<p>Existem muitos algoritmos para obter a matriz acima e cada um tem suas idiossincrasias. Falaremos sobre eles na próxima postagem do blog (<em>prenda a respiração!</em>).</p>\n<h3>Recomendação</h3>\n<p>Finalmente, é hora de recomendar um novo item aos seus usuários. Assim que tivermos a Matriz de classificações previstas (R ^), fazer a recomendação é uma questão de selecionar e filtrar os itens previstos da seguinte forma:</p>\n<p>          <strong>1. Selecione os candidatos:</strong> Selecione os itens cujas avaliações foram previstas.\n          <strong>2. Filtragem:</strong> Defina um limite (por exemplo, 4,0) e exclua candidatos cujas classificações sejam inferiores a isso.\n          <strong>3. Top N:</strong> Classifica o resultado por classificação, estabelece o número de recomendações (N) e apresenta ao usuário.</p>\n<p>A figura abaixo ilustra o processo levando em consideração o usuário Victor listado na tabela anterior.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 960px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 25.83333333333333%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsSAAALEgHS3X78AAABRElEQVQY0yWQ20vCABjF/ZcLq4cIwqeee4iylCiESINIpLLULKEECbLyunkra87L5m5uRv7a1oED57vyfSdgaArK6Jt6pcxnT2RmKNi2zQIwDc2PW0KVtlDztWXqeLDtmRurqGOJjljHsabo0wmB5/qQ62KfVKHF5WOX/IuMZc/9oZ6kky5JJG4rLqvclAZ8DP4XGpbj9g65eupxftdwaxKl2ohALCuxdlBjI/rOerTGVrzPYKiiKUNyzxLBSIfgbpnV/aqruxQrYyx9jNCRCJ18s7TzxsreO8thgUhaJhB/kNk8ahA6fCF0XGf7QkLVLPid0+gpnN33iWeaJLKiq79o9aew+GGs6KSKMqcZgUROJJH/oPDqXnhdktlNttlPNgknRWK5Aab7Dr6HOqauMDOnPj3t5Tw4joOhTfy8ZXhUfQ//AF2oYQRryfDCAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image lazyload\"\n        alt=\"RecSys Filtering\"\n        title=\"RecSys Filtering\"\n        data-src=\"/static/6acaed139dbb707e59a1a7e9687f471f/d9199/recsys_filtering.png\"\n        data-srcset=\"/static/6acaed139dbb707e59a1a7e9687f471f/8ff5a/recsys_filtering.png 240w,\n/static/6acaed139dbb707e59a1a7e9687f471f/e85cb/recsys_filtering.png 480w,\n/static/6acaed139dbb707e59a1a7e9687f471f/d9199/recsys_filtering.png 960w,\n/static/6acaed139dbb707e59a1a7e9687f471f/c6ff8/recsys_filtering.png 1088w\"\n        sizes=\"(max-width: 960px) 100vw, 960px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<h2>Predição vs Recomendação</h2>\n<p>Você pode ler postagens que usam <strong>previsão</strong> e <strong>recomendação</strong> de forma intercambiável, mas têm significados diferentes. <strong>Previsão</strong> corresponde à classificação esperada para um determinado item. Na fase de aprendizagem, seu modelo atribui classificações aos itens que o usuário não viu e essas classificações são previsões. Por outro lado, <strong>recomendação</strong> corresponde ao próprio item (ou conjunto de itens) que está sendo recomendado ao usuário.</p>","frontmatter":{"title":"Iniciando com Sistemas de Recomendação: Parte II","date":"2019-09-07T00:00:00.000Z","description":null,"tags":["recommender","systems","machine","learning","recsys","recommendation"],"rating":null,"image_url":"https://unsplash.com/photos/o6GEPQXnqMY","image_author":"Mr Cup / Fabien Barral"},"fields":{"slug":"/2019/2019-09-07-Iniciando_com_sistemas_de_recomendacao_parte_II/"},"timeToRead":6}},"pageContext":{"id":"6fd5dfe9-dedb-5a23-b2e1-861736e6e8ff","language":"pt","intl":{"language":"pt","languages":["en","pt"],"messages":{"of":"de","or":"ou","Next":"Próximo","Previous":"Anterior","reading":"leitura","Comments":"Comentários","Featured_image_credits":"Créditos da imagem de destaque","Not_Found":"Não Encontrado","Not_Found_Text":"A página que você está procurando pode ter sido removida, ter seu nome alterado ou estar temporariamente indisponível.","Not_Found_Nav":"Você pode ir para","Warning_deprecated":"Atenção: esse post foi escrito a algum tempo e pode não ser mais válido, ok?"},"routed":true,"originalPath":"/blog/2019/2019-09-07-Iniciando_com_sistemas_de_recomendacao_parte_II/","redirect":true,"defaultLanguage":"en"}}},"staticQueryHashes":["2841359383"]}